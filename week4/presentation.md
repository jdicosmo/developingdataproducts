<style>
.small-code pre code {
  font-size: 1em;
}
</style>

Developing Data Products - Reproducible Pitch
========================================================
author: Jonathan Di Cosmo
date: 29/06/2020
autosize: true

Presentation of the app
========================================================

### Illustration of k-means clustering

The app shows the clusters created by the k-means algorithm for a simple 2D dataset.

The number of points can be chosen by the user. The points are generated by 3 normal distributions with different centers.

The user can vary the number of clusters computed by the k-means algorithm. The clusters are displayed in different colors in the plot.

### Code

The app is developed with Shiny. The following slides show the code of the interface and the server.

Interface code (ui.R)
========================================================
class: small-code


```r
shinyUI(fluidPage(
    titlePanel("Illustration of k-means clustering"),
    sidebarLayout(
        sidebarPanel(
            numericInput("numPoints", "Number of points in the simulation:",
                         value = 100, min = 10, max = 1000, step = 1),
            numericInput("numClusters", "Number of clusters in the k-means algorithm:",
                         value = 2, min = 1, max = 10, step = 1),
            checkboxInput("showClusters", "Show clusters", value = FALSE)
        ),
        mainPanel(
            tabsetPanel(type = "tabs",
                        tabPanel("Output", br(), plotOutput("plot1", 
                                                            height = 500, 
                                                            width = 500)),
                        tabPanel("Help", br(), htmlOutput("help")))
        )
    )
))
```

Server code (server.R)
========================================================
class: small-code


```r
shinyServer(function(input, output) {
    getData <- reactive({
        n <- ifelse(input$numPoints >= 20, input$numPoints, 20)
        n1 <- n / 3; n2 <- n1; n3 <- n - n1 - n2
        dataX <- c(rnorm(n1, mean = 1, sd = 0.5), rnorm(n2, 1, 0.3), rnorm(n3, 3, 0.3))
        dataY <- c(rnorm(n1, mean = 1, sd = 0.5), rnorm(n2, 3, 0.3), rnorm(n3, 1, 0.3))
        data.frame(dataX = dataX, dataY = dataY)
    })
    output$plot1 <- renderPlot({
        df <- getData()
        if(input$showClusters) {
            set.seed(42)
            nc <- ifelse(input$numClusters > 0, input$numClusters, 1)
            cl <- kmeans(df, centers = ifelse(nc <= 10, nc, 10))
            pt_colors <- cl$cluster
        } else
            pt_colors <- "grey"
        plot(df$dataX, df$dataY, xlab = "x", ylab = "y", main = "Plot of Random Points",
             xlim = c(-1, 5), ylim = c(-1, 5), col = pt_colors)
    })
    output$help <- renderUI(HTML(...))
})
```

Example
========================================================

The following plot is generated by R code contained in the presentation:

<img src="presentation-figure/unnamed-chunk-3-1.png" title="plot of chunk unnamed-chunk-3" alt="plot of chunk unnamed-chunk-3" width="40%" style="display: block; margin: auto;" />
